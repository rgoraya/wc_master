class Game < Mapvisualization #subclass Mapvis, so we can use it for layout and stuff

  def initialize(args)
    puts "===game initialize args===" #debugging
    puts args

    @width, @height = args[:width], args[:height]

  	# Build a Graph of Nodes
  	@graph = Graph.new
  	@nodes = @graph.nodes
  	@edges = @graph.edges
    @adjacency = Hash.new(0)

    make_expert_graph

    #default_layout #will eventually have custom initial layout
    grid_nodes_in_box(@nodes,Vector[@width-200+50, 130],Vector[200, @height-130+50]) #hard-coded starting box

    #@nodes[0].location = Vector[0, @height/2]

    #handle_params(args[:params],args) ##do the normal graphing command    
  end

  # make the nodes and edges for our expert graph
  def make_expert_graph
    ISSUE_NAMES.each_with_index {|name, i| @nodes[i] = Graph::Node.new(i, name, "") unless name.blank? }
    #EXPERT_ADJACENCY_1.each_with_index {|(key, value), i| @edges.push(Graph::Edge.new(i, @nodes[key[0]-1], @nodes[key[1]-1], (value > 0 ? MapvisualizationsHelper::INCREASES : MapvisualizationsHelper::DECREASES))) }
  end



#######################################
### CONSTANTS FOR THE EXPERT GRAPHS ###
########################################
  
  ISSUE_NAMES = [
    'Algae Blooms/Dead Zones',
    ' ',
    ' ',
    'Bad weather',
    'Amount of samaki caught',
    'Coastal water quality',
    'Cost per unit catch',
    'Society Affluence',
    'Demand for farm-raised fish feed (aquaculture)',
    ' ',
    'Demand for Livestock feed',
    'Demand for Omega-3 as a food supplement',
    'Effort put into catching menhaden',
    'El Nino',
    ' ',
    'Lifespan of menhaden',
    'Management at the ecosystem level',
    'Management of menhaden catch',
    'Marine mammals',
    'Menhaden population',
    'Dissolved oxygen levels',
    'Nutrients in the water',
    'Omega Corporation profits',
    'Predatory bird populations',
    'Public information to increase fish oil intake',
    'Public worry about decrease of menhaden',
    'Reproduction rate of menhaden',
    'Sales price per unit catch',
    'Soybeans sales',
    'Sport fish health',
    'Sport fish populations',
    'Scientific speculation of overfishing',
    'Menhaden industry leaders\' claim of healthy fishery',
    'Disagreement over menhaden poplation health',
    'Price of competing products (soybeans and vegetable oils)',
    'Reproduction rate per unit fish',
    'Production from international fish oil competitors',
    'Amount of sport fish caught',
    'Human population',
    'Food eaten per fish (menhaden)',
  ]

  EXPERT_ADJACENCY_1 = {
    [1,6]=>-1,											
    [1,21]=>-1,																			
    [4,7]=>1,																																
    [5,16]=>-1,				
    [5,20]=>-1,			
    [5,23]=>1,				
    [5,28]=>-1,												
    [7,13]=>-1,										
    [7,23]=>-1,																	
    [8,12]=>1,																									
    [8,38]=>1,	
    [9,28]=>1,											
    [11,28]=>1,												
    [12,28]=>1,												
    [13,5]=>1,																																		
    [14,37]=>-1,			
    [16,27]=>1,												
    [17,18]=>1,
    [17,19]=>1,	
    [17,20]=>1,				
    [17,24]=>1,							
    [17,31]=>1,									
    [18,5]=>-1,																																			
    [19,20]=>-1,																				
    [20,1]=>-1,			
    [20,5]=>1,	
    [20,7]=>-1,												
    [20,19]=>1,					
    [20,24]=>1,		
    [20,26]=>-1,					
    [20,31]=>1,
    [20,32]=>-1,								
    [20,40]=>-1,
    [21,6]=>1,												
    [21,20]=>1,																				
    [22,1]=>1,				
    [22,6]=>-1,																																		
    [22,40]=>1,
    [23,13]=>1,																				
    [23,33]=>1,							
    [24,20]=>-1,																				
    [25,12]=>1,																											
    [26,17]=>1,	
    [26,18]=>1,																						
    [27,20]=>1,																				
    [28,13]=>1,										
    [28,23]=>1,														
    [28,37]=>1,			
    [29,35]=>-1,					
    [30,38]=>1,	
    [31,20]=>-1,						
    [31,26]=>-1,											
    [31,38]=>1,	
    [32,17]=>1,	
    [32,18]=>1,								
    [32,26]=>1,														
    [33,18]=>-1,																						
    [35,28]=>1,											
    [37,28]=>-1,												
    [38,30]=>-1,
    [38,31]=>-1,								
    [39,9]=>1,
    [39,11]=>1,	
    [39,12]=>1,										
    [39,22]=>1,													
    [39,35]=>1,					
    [40,20]=>1,   
  }

  EXPERT_ADJACENCY_2 = {
    [1,40]=>1,
    [4,5]=>-1,																																			
    [5,20]=>-1,			
    [5,23]=>1,																	
    [6,17]=>1,				
    [6,21]=>-1,																			
    [7,23]=>1,					
    [7,28]=>1,												
    [8,7]=>1,		
    [8,9]=>1,		
    [8,11]=>1,																	
    [8,28]=>1,	
    [8,29]=>1,											
    [9,7]=>1,																					
    [9,28]=>1,												
    [11,7]=>1,																					
    [11,28]=>1,
    [11,29]=>1,											
    [12,7]=>1,																				
    [12,28]=>1,												
    [13,5]=>1,																																			
    [14,5]=>-1,																																			
    [17,6]=>1,												
    [17,19]=>1,
    [17,20]=>1,
    [17,21]=>1,
    [17,22]=>1,	
    [17,24]=>1,		
    [17,27]=>1,		
    [17,30]=>1,
    [17,31]=>1,									
    [18,20]=>1,																				
    [19,17]=>-1,							
    [19,26]=>-1,				
    [19,32]=>-1,	
    [19,34]=>-1,						
    [20,1]=>-1,			
    [20,5]=>1,							
    [20,13]=>-1,				
    [20,18]=>-1,
    [20,19]=>1,		
    [20,24]=>1,				
    [20,30]=>1,
    [20,31]=>1,									
    [21,6]=>1,						
    [21,17]=>1,																							
    [22,1]=>1,							
    [22,17]=>1,																							
    [23,13]=>1,																											
    [24,17]=>-1,					
    [24,26]=>-1,			
    [24,32]=>-1,	
    [24,34]=>-1,						
    [25,7]=>1,		
    [25,12]=>1,						
    [25,28]=>1,												
    [26,17]=>1,
    [26,18]=>1,				
    [26,34]=>1,						
    [27,21]=>1,																			
    [28,13]=>1,								
    [28,23]=>1,																	
    [29,23]=>-1,																	
    [30,17]=>-1,						
    [30,26]=>-1,				
    [30,32]=>-1,	
    [30,34]=>-1,		
    [30,38]=>1,		
    [31,17]=>-1,			
    [31,24]=>1,	
    [31,26]=>-1,			
    [31,32]=>-1,	
    [31,34]=>-1,		
    [31,38]=>1,		
    [32,17]=>1,
    [32,18]=>1,			
    [32,26]=>1,				
    [32,34]=>1,						
    [33,26]=>-1,			
    [33,34]=>1,						
    [34,17]=>1,
    [34,18]=>1,																						
    [35,23]=>1,																	
    [37,23]=>-1,																	
    [38,31]=>-1,	
    [38,33]=>1,							
    [39,6]=>-1,	
    [39,8]=>1,	
    [39,9]=>1,		
    [39,11]=>1,
    [39,12]=>1,				
    [39,21]=>-1,	
    [39,22]=>-1,		
    [39,25]=>1,
    [39,26]=>1,				
    [39,32]=>1,	
    [39,34]=>1,						
    [40,20]=>1,						
    [40,27]=>1,    
  }
  
end
